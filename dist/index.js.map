{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Player, PlayerAPI, PlayerEvent } from 'bitmovin-player';\nimport { UIFactory } from 'bitmovin-player-ui';\nimport './index.scss';\n\nexport type BitMovinPlayerProps = {\n  lincenseKey: string;\n};\n\nconst BitMovinPlayer: React.FC<BitMovinPlayerProps> = ({ lincenseKey }) => {\n  const playerWrapperRef = useRef<HTMLDivElement>(null);\n  const [player, setPlayer] = useState<PlayerAPI>();\n\n  const createPlayer = useCallback(\n    (elementContainer: HTMLElement) => {\n      return new Player(elementContainer, {\n        key: lincenseKey,\n        ui: false\n      });\n    },\n    [lincenseKey]\n  );\n\n  useEffect(() => {\n    if (playerWrapperRef.current) {\n      const newPlayer = createPlayer(playerWrapperRef.current);\n      UIFactory.buildDefaultSmallScreenUI(newPlayer);\n      setPlayer(newPlayer);\n    }\n  }, [createPlayer, playerWrapperRef]);\n\n  useEffect(() => {\n    const playing = () => console.log('player is playing');\n    player?.on(PlayerEvent.Playing, playing);\n    const source = {\n      hls:\n        '//bitmovin-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8'\n    };\n    player?.load(source).then(() => {\n      player.play();\n    });\n    return () => {\n      player?.off(PlayerEvent.Playing, playing);\n    };\n  }, [player]);\n\n  return <div ref={playerWrapperRef} />;\n};\n\nexport default BitMovinPlayer;\n"],"names":["useRef","useState","useCallback","Player","useEffect","UIFactory","PlayerEvent","React"],"mappings":";;;;;;;;;;IASM,cAAc,GAAkC,UAAC,EAAe;QAAb,WAAW,iBAAA;IAClE,IAAM,gBAAgB,GAAGA,YAAM,CAAiB,IAAI,CAAC,CAAC;IAChD,IAAA,KAAsBC,cAAQ,EAAa,EAA1C,MAAM,QAAA,EAAE,SAAS,QAAyB,CAAC;IAElD,IAAM,YAAY,GAAGC,iBAAW,CAC9B,UAAC,gBAA6B;QAC5B,OAAO,IAAIC,qBAAM,CAAC,gBAAgB,EAAE;YAClC,GAAG,EAAE,WAAW;YAChB,EAAE,EAAE,KAAK;SACV,CAAC,CAAC;KACJ,EACD,CAAC,WAAW,CAAC,CACd,CAAC;IAEFC,eAAS,CAAC;QACR,IAAI,gBAAgB,CAAC,OAAO,EAAE;YAC5B,IAAM,SAAS,GAAG,YAAY,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;YACzDC,0BAAS,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC;YAC/C,SAAS,CAAC,SAAS,CAAC,CAAC;SACtB;KACF,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAErCD,eAAS,CAAC;QACR,IAAM,OAAO,GAAG,cAAM,OAAA,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAA,CAAC;QACvD,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,EAAE,CAACE,0BAAW,CAAC,OAAO,EAAE,OAAO,EAAE;QACzC,IAAM,MAAM,GAAG;YACb,GAAG,EACD,oGAAoG;SACvG,CAAC;QACF,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC;YACxB,MAAM,CAAC,IAAI,EAAE,CAAC;SACf,EAAE;QACH,OAAO;YACL,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,GAAG,CAACA,0BAAW,CAAC,OAAO,EAAE,OAAO,EAAE;SAC3C,CAAC;KACH,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,OAAOC,iDAAK,GAAG,EAAE,gBAAgB,GAAI,CAAC;AACxC;;;;"}